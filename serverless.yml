service: lambda-boto32

provider:
  name: aws
  region: us-west-2
  runtime: python3.6
  iamRoleStatements:
    - Effect: 'Allow'
      Action:
        - 's3:ListBucket'
      Resource:
        Fn::Join:
          - ''
          - - 'arn:aws:s3:::'
            - Ref: ServerlessDeploymentBucket
    - Effect: 'Allow'
      Action:
        - 's3:CreateBucket'
      Resource:
        Fn::Join:
          - ''
          - - 'arn:aws:s3:::'
            - Ref: ServerlessDeploymentBucket
    - Effect: 'Allow'
      Action:
        - 's3:PutObject'
      Resource:
        Fn::Join:
          - ''
          - - 'arn:aws:s3:::'
            - Ref: ServerlessDeploymentBucket       
functions:
  lambdapy:
    handler: handler.lambdapy
    layers:
      - {Ref: PythonRequirementsLambdaLayer}
    events:
      - http:
          path: /create
          method: get
plugins:
  - serverless-python-requirements
custom:
  pythonRequirements:
    layer: true  
